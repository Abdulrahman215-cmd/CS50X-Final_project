# Rust network tools
## Video Demo: https://vimeo.com/1106515963?share=copy
[![Watch the video](https://i.imgur.com/VIDEO_THUMBNAIL.png)](https://vimeo.com/1106515963)


## Description:
#### For my final project I made a network toolkit using Rust, I use command line arguments so I can specify which network tool should be used, I made 3 network tools and they are: 
1. Network Traffic Monitor: Used for monitoring HTTPS traffic in my own computer (I specified to use the wifi adapter for monitoring). When I click on a website or reload a page it should display what port it is (for both the one who sent the packet and received it). If the port is not an HTTPS then it will only say "Non-HTTPS packet detected" and display the packet size. If it is HTTPS it will display the ip of the website and the name of my computer (I can't display domain name of the website instead of ip because it is nearly impossible to do so (it is a security feature)), if I sent the packet it will say "HTTPS packet detected and it is sent" and it will display my computer name as the source and the ip address of the website as the destination and packet size of the sent packet, and if I received the packet it will say "HTTPS packet detected and it got received" and make my computer name as the destination and the ip address of the website as the source and packet size of the received packet. It also ensures packets are longer then 14 bytes and will skip the first 14 bytes of the header packet ensuring it will get the actual IPv4 packet data. Needless to say that what I am checking is a TCP packet and if it is isn't a TCP it will display "TCP packet not found, possibly a non-TCP packet" and my program handles other stuff that if it isn't an ip packet etc. I set a 20 second timer to capture the packets when I click on website, after the 20 seconds it should say "Stopping capture after 20 seconds" and display the total length of all my packets that I captured (HTTPS and non-HTTPS alike). and display the download speed and upload speed (this is very depended on the byte size of packets if packets were in KB or maybe even MB the download speed would also display in KB/MB but since packets are in bytes then download speed and upload speed is also in bytes).
2. Network Speed Tester: Network Speed Tester has 4 functions that run asynchronously and they are:
* Process Download Speed: Downloads a 100MB file from a website and I see how long it takes to download the file and we measure download speed by dividing the time it took to download an the bytes in the file. It may take a while for it to finish download so I made a dot (.) increase for every second goes by until the download is finished.
* Process Upload Speed: Uploads a 15MB PDF to a website (before upload it loads the file then send it to the website) and I see how long it takes to upload the file.
* Process Latency: Sends a GET request to a website and we see how long it takes to send a request to a website and receive a response, we measure the time in ms.
* Process Packet Loss: This function simulates a network test on localhost to measure UDP packet loss (TCP: Ensures data packets arrive in the sequence they were sent, UDP doesn't do that, but is more faster to recieve packets(usefull for making calls)). packet loss is measured by sending 10 UDP packets from a client socket (127.0.0.1:8000), receiving those packets on a server socket (127.0.0.1:5500) and sending them back. If there was no packet got received or sent back in 9 seconds then it will start counting how many packets got sent, received and calculate how many were lost (if any). 
3. Port Scanner: We check if ports (8000 and 5500) are open or closed on localhost. I used TcpStream which tries to open a TCP connection to that IP and port. If a program is listening on that port then it prints "Port 8000/5500 is open" or If nothing is listening then it prints "Port 8000/5500 is closed".

---

## What's contained in each file?
* main.rs: Uses command line argument to choose which tool to run, calls the appropriate file/function (which are network_traffic_monitor, network_speed_tester and port_scanner) based on the input
* network_traffic_monitor.rs: Captures live network traffic from a specific network interface (my Wi-Fi adapter). Inspects TCP packet information, tracks sent/received HTTPS (port 443) traffic, estimates download and upload speed and prints info about domains, ip, ports, and packet sizes
* network_speed_tester.rs: has 4 functions that run asynchronously: 1. process_download_speed: Downloads a 100MB test file from a website (speedtest.tele2.net), measures time taken to download, print dots (.) every second when downloading and calculates download speed in Mbps. 2. process_upload_speed: Uploads a local file (15-MB.pdf) to a website (httpbin.org), measures how long it takes and calculates upload speed in Mbps. 3. process_latency: Measures latency to a website (Rust homepage) and Measures how long the round-trip takes. 4. process_packet_loss: Simulates a UDP client-server test on 127.0.0.1, sends 10 UDP packets from client to server, server tries to send each one back, tracks and prints how many were sent and received and calculates packet loss %
* port_scanner.rs: Check if ports (8000 and 5500) are open or closed on localhost.
* cargo.toml: Specifies all the external libraries I need to compile and run my project
* .cargo/config.toml: This file targets Windows, adds a compiler flag to look for native libraries in my Npcap SDK folder and ensures your project can successfully link with Npcapâ€™s .lib files when compiling

---

## Certain design choices I debated
* Network Traffic Monitor: 1. I debated if I should only use my laptop as the source domain only so only me could sent and not recieve a packet, but later I sticked to making it both sent and received the packet. 2. I tried my absolute best to make ip addresses of websites into names but couldn't so I sticked with only IP address for website and domain name for my device. 3. I used struct in the file because I was most fimilier with (because I did a few projects using rust before this final project) and know how to handle it. 4. I tried to decide on the best amount of time to capture packets, first it was 10 seconds but it felt too short and long after I changed it to 20 seconds. 5. I tried to implent a feature where I could see devices on my network instead of only my laptop, seeing atleast the top devices who is sending the most packets and giving them simple names like phone or android etc 
* Network Speed Tester: 1- process_upload_speed: I thought I could read the file differently like saying open file and read_exact, but I found out that it's just read("15-MB.pdf"), that simple. 2- process_packet_loss: I started out way different, I used at first http packets instead of UDP which was way more easy, but all my packets were received and sent back so UDP was better.
* Port Scanner: I thought of giving my port_scanner a range to scan the ports but it took too long and thought what I did was enough as a project and settled for only 2 ports I could actually open an closed since it's not okay to scan ports of websites I used mine.
